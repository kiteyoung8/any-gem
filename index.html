<header class="p-4 border-b border-emerald-900/30 bg-[#0f172a] flex flex-col z-40">
    <div class="flex justify-between items-center">
        <div class="flex flex-col">
            <span class="text-lg font-black text-white italic">anyGem <span class="text-emerald-500">v37.0</span></span>
            <span class="text-[8px] text-emerald-400 font-mono tracking-widest">SLIDE ARCHITECT</span>
        </div>
        <select id="mode-select" onchange="updateModeUI()" class="bg-emerald-900/20 text-white text-xs py-2 px-3 rounded-xl border border-emerald-500/30 outline-none font-bold">
            <option value="chat">ğŸ’¬ é«˜é€Ÿå°è©±</option>
            <option value="report">ğŸ“‘ æ·±åº¦ç ”å ±</option>
            <option value="art">ğŸ¨ è—è¡“ç”Ÿåœ–</option>
            <option value="calendar">ğŸ“… æ—¥æ›†ç®¡å®¶</option>
            <option value="presentation">ğŸ“Š æ™ºèƒ½ç°¡å ±</option>
        </select>
    </div>
    
    <div id="ppt-settings" class="bg-emerald-900/10 border-emerald-500/20 rounded-xl grid grid-cols-2 md:grid-cols-3 gap-4 text-xs mt-3">
        <div class="flex flex-col gap-1">
            <label class="text-emerald-400 font-bold text-[10px]">ç”Ÿæˆé¡åˆ¥ (Strategy)</label>
            <select id="ppt-strategy" class="bg-slate-800 text-white rounded p-1">
                <option value="native">ğŸŒ¿ åŸç”Ÿè¨­è¨ˆ (ç´”å·¥å…·ç”Ÿæˆ)</option>
                <option value="ai_art">âœ¨ AI ç”Ÿåœ– (å…¨èƒŒæ™¯æ¸²æŸ“)</option>
                <option value="hybrid" selected>ğŸŒ“ æ··åˆæ¨¡å¼ (ç”Ÿåœ–+åŸç”Ÿ)</option>
            </select>
        </div>
        <div class="flex flex-col gap-1">
            <label class="text-emerald-400 font-bold text-[10px]">é¢¨æ ¼é¸é … (Theme)</label>
            <select id="ppt-theme" class="bg-slate-800 text-white rounded p-1">
                <option value="Professional">å°ˆæ¥­å•†å‹™</option>
                <option value="Cyberpunk">è³½åšé¾å…‹</option>
                <option value="Warm">æº«æš–äººæ–‡</option>
                <option value="Custom">ğŸ–ï¸ è‡ªå®šç¾©é¢¨æ ¼...</option>
            </select>
        </div>
        <div id="custom-style-wrap" class="flex flex-col gap-1 hidden col-span-2 md:col-span-1">
            <label class="text-emerald-400 font-bold text-[10px]">è‡ªå®šç¾©æè¿°</label>
            <input type="text" id="ppt-custom-style" class="bg-slate-800 text-white rounded p-1 border border-white/10" placeholder="ä¾‹å¦‚ï¼šæ¥µç°¡åŒ—æ­é¢¨, äº®æ©˜è‰²èª¿...">
        </div>
    </div>
</header>

<script>
// åœ¨ updateModeUI ä¸­åŠ å…¥ç›£è½
function updateModeUI() {
    const m = modeSelect.value;
    const pptBox = document.getElementById('ppt-settings');
    if (m === 'presentation') {
        pptBox.classList.add('open');
        // ç›£è½é¢¨æ ¼æ˜¯å¦ç‚ºè‡ªå®šç¾©
        document.getElementById('ppt-theme').onchange = (e) => {
            const wrap = document.getElementById('custom-style-wrap');
            e.target.value === 'Custom' ? wrap.classList.remove('hidden') : wrap.classList.add('hidden');
        };
    } else {
        pptBox.classList.remove('open');
    }
}

// åœ¨ handleSend ä¸­ç²å–æ–°çš„åƒæ•¸
async function handleSend() {
    const text = input.value.trim();
    if(!text) return;

    let extra = {};
    if(modeSelect.value === 'presentation') {
        extra = {
            strategy: document.getElementById('ppt-strategy').value,
            theme: document.getElementById('ppt-theme').value,
            customStyle: document.getElementById('ppt-custom-style').value
        };
    }
    
    // ... å¾ŒçºŒ fetch ä¿æŒèˆ‡ä¹‹å‰ç›¸åŒ ...
}
</script>
